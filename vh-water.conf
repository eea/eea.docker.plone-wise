<VirtualHost *:80>
    ServerAdmin helpdesk@water.europa.eu
    ServerName water.europa.eu

    ErrorLog /var/log/apache.log

    RewriteEngine On
    SSLProxyEngine on

    #RewriteRule ^/marine/geonetwork/catalog/lib/(.*) http://10.120.30.141:3000/geonetwork/catalog/lib/$1 [P]
    #RewriteRule ^/marine/geonetwork/images/logos/(.*) http://10.120.30.141:3000/geonetwork/images/logos/$1 [P]
    #RewriteRule ^/marine/geonetwork/static/(.*) http://10.120.30.141:3000/geonetwork/static/$1 [P]

    #ProxyRequests     off
    #ProxyPreserveHost on
    #ProxyPass /marine/geonetwork/ http://wise-geonetwork:8080/geonetwork/
    #ProxyPassReverse /marine/geonetwork/ http://wise-geonetwork:8080/geonetwork/


    Header set Access-Control-Allow-Origin "https://water.europa.eu"
    Header set Access-Control-Allow-Credentials "true"

    ProxyTimeout 1200

    #RewriteCond %{REQUEST_URI}  !/registry-static
    #RewriteRule ^/geonetwork(/|.*)$ http://wise-geonetwork:8080/geonetwork/$1 [P,NE,L]

    RewriteRule /geonetwork/(.*) http://wise-geonetwork:8080/marine/geonetwork/$1 [P,L,QSA]


    #RewriteRule ^/(.*geonetwork.*) http://wise-geonetwork:8080/geonetwork/$$1 [P]
    #RewriteRule ^/marine/geonetwork(.*) http://wise-geonetwork:8080/geonetwork/$$1 [P]
    RewriteRule ^/(.*) http://varnish:6081/VirtualHostBase/https/water.europa.eu:443/Plone/VirtualHostRoot/$1 [P,L]

</VirtualHost>
